<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="mbinary">



<meta name="description" content="1. 概念 2. 二叉查找树 2.1. 随机构造的二叉查找树 2.2. 平均结点深度 2.3. 不同的二叉树数目(Catalan num) 2.4. 好括号列">
<meta name="keywords" content="数据结构,树">
<meta property="og:type" content="article">
<meta property="og:title" content="『数据结构』树">
<meta property="og:url" content="https://mbinary.xyz/tree.html">
<meta property="og:site_name" content="mbinary&#39;s blog">
<meta property="og:description" content="1. 概念 2. 二叉查找树 2.1. 随机构造的二叉查找树 2.2. 平均结点深度 2.3. 不同的二叉树数目(Catalan num) 2.4. 好括号列">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-4.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-5.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/AVL_Tree_Example.gif.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/from wiki.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig-zig.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig-zag.png">
<meta property="og:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/treap.png">
<meta property="og:updated_time" content="2021-04-23T08:02:23.262Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="『数据结构』树">
<meta name="twitter:description" content="1. 概念 2. 二叉查找树 2.1. 随机构造的二叉查找树 2.2. 平均结点深度 2.3. 不同的二叉树数目(Catalan num) 2.4. 好括号列">
<meta name="twitter:image" content="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-1.png">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="mbinary&#39;s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/yinyang.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>『数据结构』树 | mbinary&#39;s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->






</head></html>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">mbinary</a></h1>
        </hgroup>

        
        <p class="header-subtitle">淡泊明志, 宁静致远</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="Let me search for you>_<" class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/archives/">归档</a></li>
                        
                            <li><a href="/tags/">标签</a></li>
                        
                            <li><a href="/leetcode/">编程</a></li>
                        
                            <li><a href="/about/">关于</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:zhuheqin1@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/mbinary" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/B树/">B树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/">KMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LRU/">LRU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/common-lisp/">common lisp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人际交往/">人际交往</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分享/">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区块链/">区块链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图/">图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图像处理/">图像处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/娱乐/">娱乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串匹配/">字符串匹配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/室友/">室友</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/影视/">影视</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/惰性学习/">惰性学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/散列表/">散列表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数字货币/">数字货币</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数论/">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契堆/">斐波那契堆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机械键盘/">机械键盘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/比特币/">比特币</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编/">汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/红黑树/">红黑树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机组成原理/">计算机组成原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书笔记/">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆向/">逆向</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择/">选择</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/黑客/">黑客</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://mbinary.xyz/links/">交换友链说明</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://www.4spaces.org">4spaces</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">mbinary</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">mbinary</a></h1>
            </hgroup>
            
            <p class="header-subtitle">淡泊明志, 宁静致远</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">归档</a></li>
                
                    <li><a href="/tags/">标签</a></li>
                
                    <li><a href="/leetcode/">编程</a></li>
                
                    <li><a href="/about/">关于</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:zhuheqin1@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/mbinary" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-tree" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/tree.html" class="article-date">
      <time datetime="2018-07-11T18:56:00.000Z" itemprop="datePublished">2018-07-11</time>
</a>



    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      『数据结构』树
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/数据结构与算法/">数据结构与算法</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/树/">树</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <!-- TOC -->
<ul>
<li><a href="#1-概念">1. 概念</a></li>
<li><a href="#2-二叉查找树">2. 二叉查找树</a><ul>
<li><a href="#21-随机构造的二叉查找树">2.1. 随机构造的二叉查找树</a></li>
<li><a href="#22-平均结点深度">2.2. 平均结点深度</a></li>
<li><a href="#23-不同的二叉树数目catalan-num">2.3. 不同的二叉树数目(Catalan num)</a></li>
<li><a href="#24-好括号列">2.4. 好括号列</a><a id="more"></a></li>
</ul>
</li>
<li><a href="#3-基数树radixtree">3. 基数树(radixTree)</a></li>
<li><a href="#4-字典树trie">4. 字典树(trie)</a><ul>
<li><a href="#41-ac-自动机">4.1. AC 自动机</a></li>
</ul>
</li>
<li><a href="#5-平衡二叉树">5. 平衡二叉树</a><ul>
<li><a href="#51-avl-tree">5.1. AVL Tree</a></li>
<li><a href="#52-splaytree">5.2. splayTree</a><ul>
<li><a href="#521-zig-step">5.2.1. Zig-step</a></li>
<li><a href="#522-zig-zig-step">5.2.2. Zig-zig step</a></li>
<li><a href="#523-zig-zag-step">5.2.3. Zig-zag step</a></li>
</ul>
</li>
<li><a href="#53-read-black-tree">5.3. read-black Tree</a></li>
<li><a href="#54-treap">5.4. treap</a></li>
</ul>
</li>
<li><a href="#6-总结">6. 总结</a></li>
<li><a href="#7-附代码">7. 附代码</a><ul>
<li><a href="#71-二叉树binarytree">7.1. 二叉树(binaryTree)</a></li>
<li><a href="#72-前缀树trie">7.2. 前缀树(Trie)</a></li>
<li><a href="#73-赢者树winnertree">7.3. 赢者树(winnerTree)</a></li>
<li><a href="#74-左斜堆">7.4. 左斜堆</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<p><a id="markdown-1-概念" name="1-概念"></a></p>
<h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1. 概念"></a>1. 概念</h1><ul>
<li>双亲</li>
<li>左右孩子</li>
<li>左右子树</li>
<li>森林</li>
<li>结点,叶子,边,路径</li>
<li>高度 h</li>
<li>遍历(前中后层)</li>
<li>结点数 n</li>
</ul>
<p><a id="markdown-2-二叉查找树" name="2-二叉查找树"></a></p>
<h1 id="2-二叉查找树"><a href="#2-二叉查找树" class="headerlink" title="2. 二叉查找树"></a>2. 二叉查找树</h1><p>又名排序二叉树,对于每个结点, 如果有,其左孩子不大于它,右孩子不小于它</p>
<p>通过前序遍历或者后序遍历就可以得到有序序列(升序,降序)</p>
<p>常用三种操作, 插入,删除,查找,时间复杂度是 $O(h)$<br>h是树高, 但是由于插入,删除而导致树不平衡, 即可能 $h\geqslant \lfloor logn \rfloor$</p>
<p><a id="markdown-21-随机构造的二叉查找树" name="21-随机构造的二叉查找树"></a></p>
<h2 id="2-1-随机构造的二叉查找树"><a href="#2-1-随机构造的二叉查找树" class="headerlink" title="2.1. 随机构造的二叉查找树"></a>2.1. 随机构造的二叉查找树</h2><p>下面可以证明,随机构造,即输入序列有 $n!$中, 每种概率相同的情况下, 期望的树高 $h=O(logn)$</p>
<p>(直接搬运算法导论上面的啦&gt;_&lt;)<br><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-1.png" alt="tree-1"></p>
<p><a id="markdown-22-平均结点深度" name="22-平均结点深度"></a></p>
<h2 id="2-2-平均结点深度"><a href="#2-2-平均结点深度" class="headerlink" title="2.2. 平均结点深度"></a>2.2. 平均结点深度</h2><p>一个较 上面定理 弱的结论:</p>
<blockquote>
<p>一棵随机构造的二叉查找树,n 个结点的平均深度为 $O(logn)$</p>
</blockquote>
<p>类似 RANDOMIZED-QUICKSORT 的证明过程, 因为快排 递归的过程就是一个递归 二叉树.<br>随机选择枢纽元就相当于这里的某个子树的根结点 在所有结点的大小随机排名, 如 i. 然后根结点将剩下的结点划分为左子树(i-1)个结点, 右子树(n-i)个结点.</p>
<p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-2.png" alt="tree-2"><br><a id="markdown-23-不同的二叉树数目catalan-num" name="23-不同的二叉树数目catalan-num"></a></p>
<h2 id="2-3-不同的二叉树数目-Catalan-num"><a href="#2-3-不同的二叉树数目-Catalan-num" class="headerlink" title="2.3. 不同的二叉树数目(Catalan num)"></a>2.3. 不同的二叉树数目(Catalan num)</h2><p>给定$\{1,2,\ldots,n\}$,组成二叉查找树的数目.<br>由上面的证明过程, 可以容易地分析得出, 任选第 i 个数作为根, 由于二叉查找树的性质, 其左子树<br>应该有 i-1个结点, 右子树有 n-i个结点.<br>如果记 n 个结点 的二叉查找树的数目为$b_n$<br>则有递推公式</p>
<script type="math/tex; mode=display">
b_n=\begin{cases}
1 &n=0 \\
\sum_{i=1}^{n}b_{i-1}b_{n-i} & n\geqslant 1
\end{cases}</script><p>然后我们来看<code>&lt;&lt;算法导论&gt;&gt;</code>(p162,思考题12-4)上怎么求的吧( •̀ ω •́ )y<br>设生成函数</p>
<script type="math/tex; mode=display">B(x)=\sum_{n=0}^{\infty}b_n x^n</script><p>下面证明$B(x)=xB(x)^2+1$<br>易得<script type="math/tex">xB(x)^2=\sum_{i=1}^{\infty}\sum_{n=i}^{\infty}b_{i-1}b_{n-i}x^n</script><br>对比$B(x), xB(x)^2+1$的 x 的各次系数,分别是 $b_k,a_{k}$<br>当 k=0, $a_k=1=b_k$<br>当 k&gt;0</p>
<script type="math/tex; mode=display">a_{k} = \sum_{i=1}^{k}b_{i-1}b_{k-i} = b_k</script><p>所以$B(x)=xB(x)^2+1$<br>由此解得</p>
<script type="math/tex; mode=display">B(x)=\frac{1-\sqrt{1-4x} }{2x}</script><p>在点 x=0 处,<br>用泰勒公式得</p>
<script type="math/tex; mode=display">
\begin{aligned}
\lim_{x\to 0}\sqrt{1-4x}&=1+\sum_{n=1}^{\infty}C_n^{\frac{1}{2}}{(-4)}^nx^n  \\
&=1+\sum_{n=1}^{\infty}\frac{(2n-3)!!{(-4x)}^n}{n!}
\end{aligned}</script><p>所以对应系数</p>
<script type="math/tex; mode=display">
\begin{aligned}
b_n&=\frac{1}{2}\frac{4^{n+1}(2n-1)!!}{2^{n+1}n!}  \\
  &=\frac{C_{2n}^{n}}{n+1}
\end{aligned}</script><p>这个数叫做 <code>Catalan 数</code><br><a id="markdown-24-好括号列" name="24-好括号列"></a></p>
<h2 id="2-4-好括号列"><a href="#2-4-好括号列" class="headerlink" title="2.4. 好括号列"></a>2.4. 好括号列</h2><p>王树禾的<code>&lt;&lt;图论&gt;&gt;</code>(p42)上用另外的方法给出Catalan数, 并求出n结点 二叉查找数的个数</p>
<p>首先定义好括号列,有:</p>
<ul>
<li>空列,即没有括号叫做好括号列</li>
<li>若A,B都是好括号列, 则串联后 AB是好括号列</li>
<li>若A是好括号列, 则 (A)是好括号列</li>
</ul>
<blockquote>
<p>充要条件: 好括号列 $\Longleftrightarrow$ 左右括号数相等, 且从左向右看, 看到的右括号数不超过左括号数</p>
<p>定理: 由 n个左括号,n个右括号组成的好括号列个数为$c(n)=\frac{C_{2n}^{n}}{n+1}$</p>
</blockquote>
<p>证明:<br>由 n左n右组成的括号列有 $\frac{2n}{n!n!}=C_{2n}^{n}$个.<br> 设括号列$a_1a_2\ldots a_{2n}$为坏括号列,<br>由充要条件, 存在最小的 j, 使得$a_1a_2\ldots a_{j}$中右括号比左括号多一个,<br>由于是最小的 j, 所以 $a_j$为右括号, $a_{j+1}$为右括号<br>把$a_{j+1}a_{j+2}\ldots a_{2n}$中的左括号变为右括号, 右变左,记为$\bar a_{j+1}\bar a_{j+2}\ldots \bar a_{2n}$</p>
<p>则括号列$a_1a_2\ldots a_{j}\bar a_{j+1}$为好括号列<br>$a_1a_2\ldots a_{j}\bar a_{j+1}\bar a_{j+2}\ldots \bar a_{2n}$可好可坏,且有n-1个右,n+1个左, 共有$\frac{2n}{(n+1)!(n-1)!}=C_{2n}^{n+1}$个.</p>
<p>所以坏括号列$a_1a_2\ldots a_{2n}$ 与括号列 $a_1a_2\ldots a_{j}\bar a_{j+1}\bar a_{j+2}\ldots \bar a_{2n}$, 有$\frac{2n}{(n+1)!(n-1)!}=C_{2n}^{n+1}$个</p>
<p>那么好括号列有</p>
<script type="math/tex; mode=display">
c(n)=C_{2n}^{n} - C_{2n}^{n+1} =\frac{C_{2n}^{n}}{n+1}</script><blockquote>
<p>推论: n个字符,进栈出栈(出栈可以在栈不为空的时候随时进行), 则出栈序列有 c(n)种</p>
</blockquote>
<p>这种先入后出的情形都是这样<br><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-3.png" alt="tree-3"></p>
<p><a id="markdown-3-基数树radixtree" name="3-基数树radixtree"></a></p>
<h1 id="3-基数树-radixTree"><a href="#3-基数树-radixTree" class="headerlink" title="3. 基数树(radixTree)"></a>3. 基数树(radixTree)</h1><p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-4.png" alt="tree-4"><br><a id="markdown-4-字典树trie" name="4-字典树trie"></a></p>
<h1 id="4-字典树-trie"><a href="#4-字典树-trie" class="headerlink" title="4. 字典树(trie)"></a>4. 字典树(trie)</h1><p>又叫<code>前缀树</code>(preifx tree).适用于储存有公共前缀的字符串集合. 如果直接储存, 而很多字符串有公共前缀, 会浪费掉存储空间.<br>字典树可以看成是基数树的变形, 每个结点可以有多个孩子, 每个结点存储的是一个字符, 从根沿着结点走到一个结点,走过的路径形成字符序列, 如果有合适的单词就可以输出.</p>
<p>当然,也可以同理得出后缀树<br><a id="markdown-41-ac-自动机" name="41-ac-自动机"></a></p>
<h2 id="4-1-AC-自动机"><a href="#4-1-AC-自动机" class="headerlink" title="4.1. AC 自动机"></a>4.1. AC 自动机</h2><p>Aho-Corasick automation,是在字典树上添加匹配失败边(失配指针), 实现字符串搜索匹配的算法.<br><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/tree-5.png" alt="tree-5"></p>
<p>图中蓝色结点 表示存在字符串, 灰色表示不存在.<br>黑色边是父亲到子结点的边, 蓝色边就是<code>失配指针</code>.</p>
<p>蓝色边(终点称为起点的后缀结点): 连接字符串<strong>终点</strong>到在<strong>图中存在的</strong>, <strong>最长</strong>严格后缀的结点. 如 caa 的严格后缀为 aa,a, 空. 而在图中存在, 且最长的是字符串  a, 则连接到这个字符串的终点 a.</p>
<p>绿色边(字典后缀结点): 终点是起点经过蓝色有向边到达的第一个蓝色结点.</p>
<p>下面摘自 <code>wiki</code></p>
<blockquote>
<p>在每一步中，算法先查找当前节点的 “孩子节点”，如果没有找到匹配，查找它的后缀节点(suffix) 的孩子，如果仍然没有，接着查找后缀节点的后缀节点的孩子, 如此循环, 直到根结点，如果到达根节点仍没有找到匹配则结束。</p>
<p>当算法查找到一个节点，则输出所有结束在当前位置的字典项。输出步骤为首先找到该节点的字典后缀，然后用递归的方式一直执行到节点没有字典前缀为止。同时，如果该节点为一个字典节点，则输出该节点本身。</p>
</blockquote>
<p><a id="markdown-5-平衡二叉树" name="5-平衡二叉树"></a></p>
<h1 id="5-平衡二叉树"><a href="#5-平衡二叉树" class="headerlink" title="5. 平衡二叉树"></a>5. 平衡二叉树</h1><p>上面的二叉查找树不平衡,即经过多次插入,删除后,  其高度变化大, 不能保持$\Theta(n)$的性能<br>而平衡二叉树就能.<br>平衡二叉树都是经过一些旋转操作, 使左右子树的结点高度相差不大,达到平衡<br> 有如下几种<br><a id="markdown-51-avl-tree" name="51-avl-tree"></a></p>
<h2 id="5-1-AVL-Tree"><a href="#5-1-AVL-Tree" class="headerlink" title="5.1. AVL Tree"></a>5.1. AVL Tree</h2><p><code>平衡因子</code>: 右子树高度 - 左子树高度<br>定义: 每个结点的平衡因子属于{0,-1,1}<br><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/AVL_Tree_Example.gif.png" alt="AVL_Tree_Example.gif"></p>
<p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/from wiki.png" alt="from wiki"></p>
<p><a id="markdown-52-splaytree" name="52-splaytree"></a></p>
<h2 id="5-2-splayTree"><a href="#5-2-splayTree" class="headerlink" title="5.2. splayTree"></a>5.2. splayTree</h2><p>伸展树, 它的特点是每次将访问的结点通过旋转旋转到根结点.<br>其实它并不平衡. 但是插入,查找,删除操作 的平摊时间是$O(logn)$<br>有三种旋转,下面都是将访问过的 x 旋转到 根部<br><a id="markdown-521-zig-step" name="521-zig-step"></a></p>
<h3 id="5-2-1-Zig-step"><a href="#5-2-1-Zig-step" class="headerlink" title="5.2.1. Zig-step"></a>5.2.1. Zig-step</h3><p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig.png" alt="zig"><br><a id="markdown-522-zig-zig-step" name="522-zig-zig-step"></a></p>
<h3 id="5-2-2-Zig-zig-step"><a href="#5-2-2-Zig-zig-step" class="headerlink" title="5.2.2. Zig-zig step"></a>5.2.2. Zig-zig step</h3><p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig-zig.png" alt="zig-zig"><br><a id="markdown-523-zig-zag-step" name="523-zig-zag-step"></a></p>
<h3 id="5-2-3-Zig-zag-step"><a href="#5-2-3-Zig-zag-step" class="headerlink" title="5.2.3. Zig-zag step"></a>5.2.3. Zig-zag step</h3><p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/zig-zag.png" alt="zig-zag"><br><a id="markdown-53-read-black-tree" name="53-read-black-tree"></a></p>
<h2 id="5-3-read-black-Tree"><a href="#5-3-read-black-Tree" class="headerlink" title="5.3. read-black Tree"></a>5.3. read-black Tree</h2><p>同样是平衡的二叉树, 以后单独写一篇关于红黑树的.</p>
<p><a id="markdown-54-treap" name="54-treap"></a></p>
<h2 id="5-4-treap"><a href="#5-4-treap" class="headerlink" title="5.4. treap"></a>5.4. treap</h2><p><a href="#21-随机构造的二叉查找树">前面提到</a>, 随机构造的二叉查找树高度为 $h=O(logn)$,以及在<a href="/alg-genral.html">算法 general</a> 中说明了怎样 随机化(shuffle)一个给定的序列.</p>
<p>所以,为了得到一个平衡的二叉排序树,我们可以将给定的序列随机化, 然后再进行构造二叉排序树.</p>
<p>但是如果不能一次得到全部的数据,也就是可能插入新的数据的时候,该怎么办呢? 可以证明,满足下面的条件构造的结构相当于同时得到全部数据, 也就是随机化的二叉查找树.</p>
<p><img src="https://raw.githubusercontent.com/mbinary/mbinary.github.io/hexo/source/images/treap.png" alt="treap"></p>
<p>这种结构叫 <code>treap</code>, 不仅有要排序的关键字 key, 还有随机生成的,各不相等的关键字<code>priority</code>,代表插入的顺序.</p>
<ul>
<li>二叉查找树的排序性质: 双亲结点的 key 大于左孩子,小于右孩子</li>
<li>最小(大)堆的堆序性质: 双亲的 prority小于(大于) 孩子的 prority</li>
</ul>
<p>插入的实现: 先进行二叉查找树的插入,成为叶子结点, 再通过旋转 实现 <code>上浮</code>(堆中术语).<br>将先排序 key, 再排序 prority(排序prority 时通过旋转保持 key 的排序)</p>
<p><a id="markdown-6-总结" name="6-总结"></a></p>
<h1 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h1><p>还有很多有趣的树结构,<br>比如斜堆, 竞赛树(赢者树,输者树,线段树, 索引树,B树, fingerTree(不知道是不是译为手指树233)…<br>这里就不详细介绍了, 如果以后有时间,可能挑几个单独写一篇文章</p>
<p><a id="markdown-7-附代码" name="7-附代码"></a></p>
<h1 id="7-附代码"><a href="#7-附代码" class="headerlink" title="7. 附代码"></a>7. 附代码</h1><p><strong><a href="https://github.com/mbinary/algorithm.git" target="_blank" rel="noopener">github地址</a></strong></p>
<p><a id="markdown-71-二叉树binarytree" name="71-二叉树binarytree"></a></p>
<h2 id="7-1-二叉树-binaryTree"><a href="#7-1-二叉树-binaryTree" class="headerlink" title="7.1. 二叉树(binaryTree)"></a>7.1. 二叉树(binaryTree)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> total_ordering</span><br><span class="line"></span><br><span class="line"><span class="meta">@total_ordering</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val,left=None,right=None,freq = <span class="number">1</span>)</span>:</span></span><br><span class="line">        self.val=val</span><br><span class="line">        self.left=left</span><br><span class="line">        self.right=right</span><br><span class="line">        self.freq = freq</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.val&lt;nd.val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.val==nd.val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'node(&#123;&#125;)'</span>.format(self.val)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">binaryTree</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.root=<span class="keyword">None</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">_add</span><span class="params">(nd,newNode)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> nd&lt;newNode:</span><br><span class="line">                <span class="keyword">if</span> nd.right <span class="keyword">is</span> <span class="keyword">None</span>:nd.right = newNode</span><br><span class="line">                <span class="keyword">else</span>:_add(nd.right,newNode)</span><br><span class="line">            <span class="keyword">elif</span> nd&gt;newNode:</span><br><span class="line">                <span class="keyword">if</span> nd.left <span class="keyword">is</span> <span class="keyword">None</span>:nd.left = newNode</span><br><span class="line">                <span class="keyword">else</span> : _add(nd.left,newNode)</span><br><span class="line">            <span class="keyword">else</span>:nd.freq +=<span class="number">1</span></span><br><span class="line">        _add(self.root,node(val))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        prt= self._findPrt(self.root,node(val),<span class="keyword">None</span>)</span><br><span class="line">        <span class="keyword">if</span> prt.left <span class="keyword">and</span> prt.left.val==val:</span><br><span class="line">            <span class="keyword">return</span> prt.left</span><br><span class="line">        <span class="keyword">elif</span>  prt.right <span class="keyword">and</span> prt.right.val==val:<span class="keyword">return</span> prt.right</span><br><span class="line">        <span class="keyword">else</span> :<span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_findPrt</span><span class="params">(self,nd,tgt,prt)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> nd==tgt <span class="keyword">or</span> nd <span class="keyword">is</span> <span class="keyword">None</span>:<span class="keyword">return</span> prt</span><br><span class="line">        <span class="keyword">elif</span> nd&lt;tgt:<span class="keyword">return</span> self._findPrt(nd.right,tgt,nd)</span><br><span class="line">        <span class="keyword">else</span>:<span class="keyword">return</span> self._findPrt(nd.left,tgt,nd)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        prt= self._findPrt(self.root,node(val),<span class="keyword">None</span>)</span><br><span class="line">        <span class="keyword">if</span> prt.left <span class="keyword">and</span> prt.left.val==val:</span><br><span class="line">            l=prt.left</span><br><span class="line">            <span class="keyword">if</span> l.left <span class="keyword">is</span> <span class="keyword">None</span>:prt.left = l.right</span><br><span class="line">            <span class="keyword">elif</span> l.right <span class="keyword">is</span> <span class="keyword">None</span> : prt.left = l.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                nd = l.left</span><br><span class="line">                <span class="keyword">while</span> nd.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:nd = nd.right</span><br><span class="line">                nd.right = l.right</span><br><span class="line">                prt.left = l.left</span><br><span class="line">        <span class="keyword">elif</span>  prt.right <span class="keyword">and</span> prt.right.val==val:</span><br><span class="line">            r=prt.right</span><br><span class="line">            <span class="keyword">if</span> r.right <span class="keyword">is</span> <span class="keyword">None</span>:prt.right = r.right</span><br><span class="line">            <span class="keyword">elif</span> r.right <span class="keyword">is</span> <span class="keyword">None</span> : prt.right = r.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                nd = r.left</span><br><span class="line">                <span class="keyword">while</span> nd.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:nd = nd.right</span><br><span class="line">                nd.right = r.right</span><br><span class="line">                prt.left = r.left</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preOrder</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">_p</span><span class="params">(nd)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> nd <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">                print(nd)</span><br><span class="line">                _p(nd.left)</span><br><span class="line">                _p(nd.right)</span><br><span class="line">        _p(self.root)</span><br></pre></td></tr></table></figure>
<p><a id="markdown-72-前缀树trie" name="72-前缀树trie"></a></p>
<h2 id="7-2-前缀树-Trie"><a href="#7-2-前缀树-Trie" class="headerlink" title="7.2. 前缀树(Trie)"></a>7.2. 前缀树(Trie)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val = None)</span>:</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.isKey = <span class="keyword">False</span></span><br><span class="line">        self.children = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self,i)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.children[i]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.children.keys())</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self,i,x)</span>:</span></span><br><span class="line">        self.children[i] = x</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.children!=&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'val: '</span>+str(self.val)+<span class="string">'\nchildren: '</span>+<span class="string">' '</span>.join(self.children.keys())</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> str(self)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.root=node(<span class="string">''</span>)</span><br><span class="line">        self.dic =&#123;<span class="string">'insert'</span>:self.insert,<span class="string">'startsWith'</span>:self.startsWith,<span class="string">'search'</span>:self.search&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, word)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Inserts a word into the trie.</span></span><br><span class="line"><span class="string">        :type word: str</span></span><br><span class="line"><span class="string">        :rtype: void</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> word:<span class="keyword">return</span></span><br><span class="line">        nd = self.root</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> word:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">in</span> nd:</span><br><span class="line">                nd = nd[i]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                newNode= node(i)</span><br><span class="line">                nd[i] = newNode</span><br><span class="line">                nd = newNode</span><br><span class="line">        <span class="keyword">else</span>:nd.isKey = <span class="keyword">True</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self, word,matchAll=<span class="string">'.'</span>)</span>:</span></span><br><span class="line">        <span class="string">"""support matchall function  eg,  'p.d' matchs 'pad' , 'pid'</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.matchAll = <span class="string">'.'</span></span><br><span class="line">        <span class="keyword">return</span> self._search(self.root,word)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_search</span><span class="params">(self,nd,word)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> idx,i <span class="keyword">in</span> enumerate(word):</span><br><span class="line">            <span class="keyword">if</span> i==self.matchAll :</span><br><span class="line">                <span class="keyword">for</span> j <span class="keyword">in</span> nd:</span><br><span class="line">                    bl =self._search(nd[j],word[idx+<span class="number">1</span>:])</span><br><span class="line">                    <span class="keyword">if</span> bl:<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">                <span class="keyword">else</span>:<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">            <span class="keyword">if</span> i  <span class="keyword">in</span> nd:</span><br><span class="line">                nd = nd[i]</span><br><span class="line">            <span class="keyword">else</span>:<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">else</span>:<span class="keyword">return</span> nd.isKey</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">startsWith</span><span class="params">(self, prefix)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns if there is any word in the trie that starts with the given prefix.</span></span><br><span class="line"><span class="string">        :type prefix: str</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        nd = self.root</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> prefix:</span><br><span class="line">            <span class="keyword">if</span> i <span class="keyword">in</span>  nd:</span><br><span class="line">                nd= nd[i]</span><br><span class="line">            <span class="keyword">else</span>:<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'preOrderTraverse  data of the Trie'</span>)</span><br><span class="line">        self.preOrder(self.root,<span class="string">''</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preOrder</span><span class="params">(self,root,s)</span>:</span></span><br><span class="line">        s=s+root.val</span><br><span class="line">        <span class="keyword">if</span>  root.isKey:</span><br><span class="line">            print(s)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> root:</span><br><span class="line">            self.preOrder(root[i],s)</span><br></pre></td></tr></table></figure>
<p><a id="markdown-73-赢者树winnertree" name="73-赢者树winnertree"></a></p>
<h2 id="7-3-赢者树-winnerTree"><a href="#7-3-赢者树-winnerTree" class="headerlink" title="7.3. 赢者树(winnerTree)"></a>7.3. 赢者树(winnerTree)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">winnerTree</span>:</span></span><br><span class="line">    <span class="string">'''if i&lt;lowExt    p = (i+offset)//2</span></span><br><span class="line"><span class="string">       else           p = (i+n-1-lowExt)//2</span></span><br><span class="line"><span class="string">       offset is a num 2^k-1 just bigger than n</span></span><br><span class="line"><span class="string">        p is the index of tree</span></span><br><span class="line"><span class="string">        i is the index of players</span></span><br><span class="line"><span class="string">        lowExt is the double node num of the lowest layer of the tree</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,players,reverse=False)</span>:</span></span><br><span class="line">        self.n=len(players)</span><br><span class="line">        self.tree = [<span class="number">0</span>]*self.n</span><br><span class="line">        players.insert(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">        self.players=players</span><br><span class="line">        self.reverse=reverse</span><br><span class="line">        self.getNum()</span><br><span class="line">        self.initTree(<span class="number">1</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getNum</span><span class="params">(self)</span>:</span></span><br><span class="line">        i=<span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="number">2</span>*i&lt; self.n:i=i*<span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">2</span>*i ==self. n:</span><br><span class="line">            self.lowExt=<span class="number">0</span></span><br><span class="line">            self.s = <span class="number">2</span>*i<span class="number">-1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.lowExt = (self.n-i)*<span class="number">2</span></span><br><span class="line">            self.s = i<span class="number">-1</span></span><br><span class="line">        self.offset = <span class="number">2</span>*i<span class="number">-1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">treeToArray</span><span class="params">(self,p)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>*p-self.offset <span class="keyword">if</span> p&gt;self.s <span class="keyword">else</span> <span class="number">2</span>*p+self.lowExt-self.n+<span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">arrayToTree</span><span class="params">(self,i)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> (i+self.offset)//<span class="number">2</span> <span class="keyword">if</span> i&lt;=self.lowExt <span class="keyword">else</span> (i-self.lowExt+ self.n<span class="number">-1</span>)//<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">win</span><span class="params">(self,a,b)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> a&lt;b <span class="keyword">if</span> self.reverse <span class="keyword">else</span> a&gt;b</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">initTree</span><span class="params">(self,p)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> p&gt;=self.n:</span><br><span class="line">            delta = p%<span class="number">2</span>  <span class="comment">#!!! good job  notice delta mark the lchild or rchlid</span></span><br><span class="line">            <span class="keyword">return</span> self.players[self.treeToArray(p//<span class="number">2</span>)+delta]</span><br><span class="line">        l = self.initTree(<span class="number">2</span>*p)</span><br><span class="line">        r = self.initTree(<span class="number">2</span>*p+<span class="number">1</span>)</span><br><span class="line">        self.tree[p] = l <span class="keyword">if</span> self.win(l,r) <span class="keyword">else</span> r</span><br><span class="line">        <span class="keyword">return</span> self.tree[p]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">winner</span><span class="params">(self)</span>:</span></span><br><span class="line">        idx = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="number">2</span>*idx&lt;self.n:</span><br><span class="line">            idx = <span class="number">2</span>*idx <span class="keyword">if</span> self.tree[<span class="number">2</span>*idx] == self.tree[idx] <span class="keyword">else</span> idx*<span class="number">2</span>+<span class="number">1</span></span><br><span class="line">        num = self.treeToArray(idx)</span><br><span class="line">        num = num+<span class="number">1</span> <span class="keyword">if</span> self.players[num] !=self.tree[<span class="number">1</span>] <span class="keyword">else</span> num</span><br><span class="line">        <span class="keyword">return</span> self.tree[<span class="number">1</span>],num</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getOppo</span><span class="params">(self,i,x,p)</span>:</span></span><br><span class="line">        oppo=<span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">2</span>*p&lt;self.n:oppo=self.tree[<span class="number">2</span>*p]</span><br><span class="line">        <span class="keyword">elif</span> i&lt;=self.lowExt:oppo=self.players[i<span class="number">-1</span>+i%<span class="number">2</span>*<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            lpl= self.players[<span class="number">2</span>*p+self.lowExt-self.n+<span class="number">1</span>]</span><br><span class="line">            oppo = lpl <span class="keyword">if</span> lpl!=x <span class="keyword">else</span> self.players[<span class="number">2</span>*p+self.lowExt-self.n+<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">return</span> oppo</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self,i,x)</span>:</span></span><br><span class="line">        <span class="string">''' i is 1-indexed  which is the num of player</span></span><br><span class="line"><span class="string">            and x is the new val of the player '''</span></span><br><span class="line">        self.players[i]=x</span><br><span class="line">        p = self.arrayToTree(i)</span><br><span class="line">        oppo =self.getOppo(i,x,p)</span><br><span class="line">        self.tree[p] = x <span class="keyword">if</span> self.win(x,oppo) <span class="keyword">else</span> oppo</span><br><span class="line">        p=p//<span class="number">2</span></span><br><span class="line">        <span class="keyword">while</span> p:</span><br><span class="line">            l = self.tree[p*<span class="number">2</span>]</span><br><span class="line">            r = <span class="keyword">None</span></span><br><span class="line">            <span class="keyword">if</span> <span class="number">2</span>*p+<span class="number">1</span>&lt;self.n:r=self.tree[p*<span class="number">2</span>+<span class="number">1</span>]   <span class="comment">#notice this !!!</span></span><br><span class="line">            <span class="keyword">else</span>:r = self.players[<span class="number">2</span>*p+self.lowExt-self.n+<span class="number">1</span>]</span><br><span class="line">            self.tree[p] = l <span class="keyword">if</span> self.win(l,r) <span class="keyword">else</span> r</span><br><span class="line">            p=p//<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><a id="markdown-74-左斜堆" name="74-左斜堆"></a></p>
<h2 id="7-4-左斜堆"><a href="#7-4-左斜堆" class="headerlink" title="7.4. 左斜堆"></a>7.4. 左斜堆</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> total_ordering</span><br><span class="line"><span class="meta">@total_ordering</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val,freq=<span class="number">1</span>,s=<span class="number">1</span>,left=None,right=None)</span>:</span></span><br><span class="line">        self.val=val</span><br><span class="line">        self.freq=freq</span><br><span class="line">        self.s=s</span><br><span class="line">        <span class="keyword">if</span> left <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> right <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self.left = left <span class="keyword">if</span> left <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">else</span> right</span><br><span class="line">            self.right =<span class="keyword">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> left.s&lt;right.s:</span><br><span class="line">                left,right =right, left</span><br><span class="line">            self.left=left</span><br><span class="line">            self.right=right</span><br><span class="line">            self.s+=self.right.s</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.val==nd.val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.val&lt;nd.val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'node(val=%d,freq=%d,s=%d)'</span>%(self.val,self.freq,self.s)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">leftHeap</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,root=None)</span>:</span></span><br><span class="line">        self.root=root</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.root <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_merge</span><span class="params">(root,t)</span>:</span>  <span class="comment">#-&gt; int</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">None</span>:<span class="keyword">return</span> t</span><br><span class="line">        <span class="keyword">if</span> t <span class="keyword">is</span> <span class="keyword">None</span>:<span class="keyword">return</span> root</span><br><span class="line">        <span class="keyword">if</span> root&lt;t:</span><br><span class="line">            root,t=t,root</span><br><span class="line">        root.right = leftHeap._merge(root.right,t)</span><br><span class="line">        <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> root.right <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            root.s=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">                root.left,root.right = root.right,<span class="keyword">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> root.left.s&lt;root.right.s:</span><br><span class="line">                root.left,root.right = root.right,root.left</span><br><span class="line">            root.s = root.right.s+<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(nd,node):nd = node(nd)</span><br><span class="line">        <span class="keyword">if</span> self.root <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self.root=nd</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> self.root==nd:</span><br><span class="line">            self.root.freq+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        prt =self. _findPrt(self.root,nd,<span class="keyword">None</span>)</span><br><span class="line">        <span class="keyword">if</span> prt <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            self.root=leftHeap._merge(self.root,nd)</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            <span class="keyword">if</span> prt.left==nd:</span><br><span class="line">                prt.left.freq+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:prt.right.freq+=<span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(nd,node):nd = node(nd)</span><br><span class="line">        <span class="keyword">if</span> self.root==nd:</span><br><span class="line">            self.root=leftHeap._merge(self.root.left,self.root.right)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            prt = self._findPrt(self.root,nd,<span class="keyword">None</span>)</span><br><span class="line">            <span class="keyword">if</span> prt <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">                <span class="keyword">if</span> prt.left==nd:</span><br><span class="line">                    prt.left=leftHeap._merge(prt.left.left,prt.left.right)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    prt.right=leftHeap._merge(prt.right.left,prt.right.right)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(nd,node):nd = node(nd)</span><br><span class="line">        prt = self._findPrt(self.root,nd,self.root)</span><br><span class="line">        <span class="keyword">if</span> prt <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> prt==nd:<span class="keyword">return</span> prt</span><br><span class="line">        <span class="keyword">elif</span> prt.left==nd:<span class="keyword">return</span> prt.left</span><br><span class="line">        <span class="keyword">else</span>:<span class="keyword">return</span> prt.right</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_findPrt</span><span class="params">(self,root,nd,parent)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(nd,node):nd = node(nd)</span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> root&lt;nd:<span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> root==nd:<span class="keyword">return</span> parent</span><br><span class="line">        l=self._findPrt(root.left,nd,root)</span><br><span class="line">        <span class="keyword">return</span>  l <span class="keyword">if</span> l <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span> <span class="keyword">else</span> self._findPrt(root.right,nd,root)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getTop</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.root</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pop</span><span class="params">(self)</span>:</span></span><br><span class="line">        nd = self.root</span><br><span class="line">        self.remove(self.root.val)</span><br><span class="line">        <span class="keyword">return</span> nd</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">levelTraverse</span><span class="params">(self)</span>:</span></span><br><span class="line">        li = [(self.root,<span class="number">0</span>)]</span><br><span class="line">        cur=<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> li:</span><br><span class="line">            nd,lv = li.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">if</span> cur&lt;lv:</span><br><span class="line">                cur=lv</span><br><span class="line">                print()</span><br><span class="line">                print(nd,end=<span class="string">' '</span>)</span><br><span class="line">            <span class="keyword">else</span>:print(nd,end=<span class="string">' '</span>)</span><br><span class="line">            <span class="keyword">if</span> nd.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:li.append((nd.left,lv+<span class="number">1</span>))</span><br><span class="line">            <span class="keyword">if</span> nd.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:li.append((nd.right,lv+<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/tree.html">『数据结构』树</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">mbinary</a></p>
        <p><span>发布时间:</span>2018-07-11, 18:56:00</p>
        <p><span>最后更新:</span>2021-04-23, 08:02:23</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/tree.html" title="『数据结构』树">https://mbinary.xyz/tree.html</a>
            <span class="copy-path" data-clipboard-text="原文: https://mbinary.xyz/tree.html　　作者: mbinary" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/red-black-tree.html">
                    『数据结构』红黑树(red-black tree)
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/hashTable.html">
                    『数据结构』散列表
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-概念"><span class="toc-number">1.</span> <span class="toc-text">1. 概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-二叉查找树"><span class="toc-number">2.</span> <span class="toc-text">2. 二叉查找树</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-随机构造的二叉查找树"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 随机构造的二叉查找树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-平均结点深度"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 平均结点深度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-不同的二叉树数目-Catalan-num"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 不同的二叉树数目(Catalan num)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-好括号列"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 好括号列</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-基数树-radixTree"><span class="toc-number">3.</span> <span class="toc-text">3. 基数树(radixTree)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-字典树-trie"><span class="toc-number">4.</span> <span class="toc-text">4. 字典树(trie)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-AC-自动机"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. AC 自动机</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-平衡二叉树"><span class="toc-number">5.</span> <span class="toc-text">5. 平衡二叉树</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-AVL-Tree"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. AVL Tree</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-splayTree"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. splayTree</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-Zig-step"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1. Zig-step</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-Zig-zig-step"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2. Zig-zig step</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-3-Zig-zag-step"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.2.3. Zig-zag step</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-read-black-Tree"><span class="toc-number">5.3.</span> <span class="toc-text">5.3. read-black Tree</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-treap"><span class="toc-number">5.4.</span> <span class="toc-text">5.4. treap</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-总结"><span class="toc-number">6.</span> <span class="toc-text">6. 总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-附代码"><span class="toc-number">7.</span> <span class="toc-text">7. 附代码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-二叉树-binaryTree"><span class="toc-number">7.1.</span> <span class="toc-text">7.1. 二叉树(binaryTree)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-前缀树-Trie"><span class="toc-number">7.2.</span> <span class="toc-text">7.2. 前缀树(Trie)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-赢者树-winnerTree"><span class="toc-number">7.3.</span> <span class="toc-text">7.3. 赢者树(winnerTree)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-左斜堆"><span class="toc-number">7.4.</span> <span class="toc-text">7.4. 左斜堆</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-6 i,
        .toc-level-6 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"『数据结构』树　| mbinary's blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>

<!--<script src="//cdn.jsdelivr.net/npm/leancloud-storage@latest/dist/av-min.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js'></script>-->

<div id="vcomments"></div>
<script>
    var notify = false == true ? true : false;
    var verify = false == true ? true : false;
    var visitor = true == true ? true : false;
new Valine({
    el: '#vcomments',
    notify: notify,
    verify: verify,
    appId: 'ArpEYbLUBmpXK3f245hKNu4A-gzGzoHsz',
    appKey: 'X5cHcMU1ATb8q0prtPGEqIPX',
    lang: 'en',
    placeholder: '请陈独秀同志发言^_^',
    avatar: 'monsterid',
    pageSize: 20,
    visitor: visitor
    });
</script>

    




    <div class="scroll" id="post-nav-button">
        
            <a href="/red-black-tree.html" title="上一篇: 『数据结构』红黑树(red-black tree)">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/hashTable.html" title="下一篇: 『数据结构』散列表">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/poems.html">生活也要有诗和远方呀</a></li><li class="post-list-item"><a class="post-list-link" href="/dft.html">傅里叶变换</a></li><li class="post-list-item"><a class="post-list-link" href="/wsl-vim-clipboard.html">WSL 中的 VIM 与 Windwos 剪切板通信</a></li><li class="post-list-item"><a class="post-list-link" href="/number-theory.html">Number-Theory</a></li><li class="post-list-item"><a class="post-list-link" href="/string-matching.html">String-Mathching-Algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/graph.html">图算法</a></li><li class="post-list-item"><a class="post-list-link" href="/fib-heap.html">『数据结构』Fibonacci-heap</a></li><li class="post-list-item"><a class="post-list-link" href="/b-tree.html">『数据结构』B树(B-Tree)及其变体 B+树,B*树</a></li><li class="post-list-item"><a class="post-list-link" href="/introduction-to-bitcoin.html">『比特币』概述</a></li><li class="post-list-item"><a class="post-list-link" href="/introduction-to-blockchain.html">『区块链』简介</a></li><li class="post-list-item"><a class="post-list-link" href="/algorithm-general.html">『算法』概述</a></li><li class="post-list-item"><a class="post-list-link" href="/red-black-tree.html">『数据结构』红黑树(red-black tree)</a></li><li class="post-list-item"><a class="post-list-link" href="/tree.html">『数据结构』树</a></li><li class="post-list-item"><a class="post-list-link" href="/hashTable.html">『数据结构』散列表</a></li><li class="post-list-item"><a class="post-list-link" href="/sort.html">『算法』排序</a></li><li class="post-list-item"><a class="post-list-link" href="/bus.html">『计算机组成原理』总线</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-device.html">『现代操作系统』IO设备</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-software.html">『现代操作系统』IO软件原理</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-hardware.html">『现代操作系统』IO硬件原理</a></li><li class="post-list-item"><a class="post-list-link" href="/os-general.html">『现代操作系统』操作系统引论</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-file-io.html">『Unix环境高级编程』linux 文件 I/O</a></li><li class="post-list-item"><a class="post-list-link" href="/multiprocessor.html">『现代操作系统』多处理机</a></li><li class="post-list-item"><a class="post-list-link" href="/simple-shell.html">『linux』c 语言实现一个简易的 shell</a></li><li class="post-list-item"><a class="post-list-link" href="/deadlock.html">『现代操作系统』死锁</a></li><li class="post-list-item"><a class="post-list-link" href="/comics-about-staying-up.html">『小仓鼠漫画』熬夜的危害与防护</a></li><li class="post-list-item"><a class="post-list-link" href="/ctf-basic.html">『CTF』网络信息安全攻防实验室之基础关 writeup</a></li><li class="post-list-item"><a class="post-list-link" href="/roommate.html">用机械键盘的室友</a></li><li class="post-list-item"><a class="post-list-link" href="/csapp-bomb-lab-report.html">CSAPP-BOMB-LAB</a></li><li class="post-list-item"><a class="post-list-link" href="/learning-and-forgetting.html">学习与遗忘</a></li><li class="post-list-item"><a class="post-list-link" href="/20-years-old-summary.html">2017 年，20 岁，大二寒假总结与感悟</a></li><li class="post-list-item"><a class="post-list-link" href="/decrypt-netease-music.html">『WEB』从网易云音乐缓存文件得到MP3</a></li><li class="post-list-item"><a class="post-list-link" href="/all-one-data-structure.html">『数据结构』inc,dec,getMin,getMax 均为 O(1) 并用于实现 LRU</a></li><li class="post-list-item"><a class="post-list-link" href="/video.html">影视作品观后感</a></li><li class="post-list-item"><a class="post-list-link" href="/books.html">书籍总结与推荐</a></li><li class="post-list-item"><a class="post-list-link" href="/hacker-and-painter.html">『读书笔记』黑客与画家</a></li><li class="post-list-item"><a class="post-list-link" href="/from-chem-to-cs.html">从化院到计院</a></li></ul>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2021 mbinary
                <br>
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
            <div class="footer-right">             
                <span>Site Updated: 2021-04-23 16:04 UTC+8</span>
                <br>
                <a href="https://github.com/mbinary"><img src="https://img.shields.io/github/followers/mbinary.svg?label=Followers&style=social"> </a>
                <a href="https://github.com/mbinary/mbinary.github.io/"><img src="https://img.shields.io/github/stars/mbinary/mbinary.github.io.svg?label=Stars&style=social"> </a>
            </div>
        </div>
        
    </div>
</footer>

    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
            
            
            
            
             archives: ".archive-article-title", 
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
