<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="mbinary">



<meta name="description" content="做 leetcode 题时遇到这样一道题，挺有趣的数据结构，所以记下来：)">
<meta name="keywords" content="O(1),有趣,数据结构,最大值,最小值,leetcode">
<meta property="og:type" content="article">
<meta property="og:title" content="『数据结构』inc,dec,getMin,getMax 均为 O(1)">
<meta property="og:url" content="https://mbinary.xyz/all-one-data-structure.html">
<meta property="og:site_name" content="mbinary&#39;s blog">
<meta property="og:description" content="做 leetcode 题时遇到这样一道题，挺有趣的数据结构，所以记下来：)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-01-30T09:41:32.406Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="『数据结构』inc,dec,getMin,getMax 均为 O(1)">
<meta name="twitter:description" content="做 leetcode 题时遇到这样一道题，挺有趣的数据结构，所以记下来：)">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="mbinary&#39;s blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/yinyang.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>『数据结构』inc,dec,getMin,getMax 均为 O(1) | mbinary&#39;s blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->






</head></html>
<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">mbinary</a></h1>
        </hgroup>

        
        <p class="header-subtitle">淡泊明志, 宁静致远</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="Let me search for you>_<" class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/archives/">归档</a></li>
                        
                            <li><a href="/tags/">标签</a></li>
                        
                            <li><a href="/leetcode/">编程</a></li>
                        
                            <li><a href="/about/">关于</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Github" href="https://github.com/mbinary" title="Github"></a>
                            
                                <a class="fa Leetcode" href="https://leetcode-cn.com/mbinary/" title="Leetcode"></a>
                            
                                <a class="fa LinkedIn" href="http://www.linkedin.com/in/cs-heqin-zhu" title="LinkedIn"></a>
                            
                                <a class="fa Email" href="mailto:zhuheqin1@gmail.com" title="Email"></a>
                            
                                <a class="fa QQ" href="http://wpa.qq.com/msgrd?v=3&uin=414313516&site=qq&menu=yes" title="QQ"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/B树/">B树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/">KMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USTC/">USTC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/common-lisp/">common lisp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macro/">macro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/人际交往/">人际交往</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/分享/">分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/动态规划/">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/区块链/">区块链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图/">图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/娱乐/">娱乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串匹配/">字符串匹配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/室友/">室友</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/影视/">影视</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/惰性学习/">惰性学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/散列表/">散列表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数字货币/">数字货币</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数学/">数学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数论/">数论</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/斐波那契堆/">斐波那契堆</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机器学习/">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/机械键盘/">机械键盘</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/比特币/">比特币</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编/">汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/红黑树/">红黑树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机组成原理/">计算机组成原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书笔记/">读书笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆向/">逆向</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择/">选择</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/黑客/">黑客</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://mbinary.xyz/links/">交换友链说明</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://www.4spaces.org">4spaces</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">mbinary</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">mbinary</a></h1>
            </hgroup>
            
            <p class="header-subtitle">淡泊明志, 宁静致远</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/archives/">归档</a></li>
                
                    <li><a href="/tags/">标签</a></li>
                
                    <li><a href="/leetcode/">编程</a></li>
                
                    <li><a href="/about/">关于</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Github" target="_blank" href="https://github.com/mbinary" title="Github"></a>
                            
                                <a class="fa Leetcode" target="_blank" href="https://leetcode-cn.com/mbinary/" title="Leetcode"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="http://www.linkedin.com/in/cs-heqin-zhu" title="LinkedIn"></a>
                            
                                <a class="fa Email" target="_blank" href="mailto:zhuheqin1@gmail.com" title="Email"></a>
                            
                                <a class="fa QQ" target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=414313516&site=qq&menu=yes" title="QQ"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-all-one-data-structure" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/all-one-data-structure.html" class="article-date">
      <time datetime="2018-01-23T16:00:00.000Z" itemprop="datePublished">2018-01-24</time>
</a>



    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      『数据结构』inc,dec,getMin,getMax 均为 O(1)
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/数据结构与算法/">数据结构与算法</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据结构/">数据结构</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <script src="/assets/js/APlayer.min.js"> </script><p>做 leetcode 题时遇到这样一道题，挺有趣的数据结构，所以记下来：)<br><a id="more"></a></p>
<h1 id="1-All-O-one-Data-Structure-—leetcode-432"><a href="#1-All-O-one-Data-Structure-—leetcode-432" class="headerlink" title="1. All O`one Data Structure —leetcode 432"></a>1. <a href="https://leetcode.com/problems/all-oone-data-structure/description/" target="_blank" rel="noopener">All O`one Data Structure</a> —leetcode 432</h1><p>Implement a data structure supporting the following operations:</p>
<ul>
<li><code>Inc(Key)</code> - Inserts a new key with value 1. Or increments an existing key by 1. Key is guaranteed to be a non-empty string.</li>
<li><code>Dec(Key)</code> - If Key’s value is 1, remove it from the data structure. Otherwise decrements an existing key by 1. If the key does not exist, this function does nothing. Key is guaranteed to be a non-empty string.</li>
<li><code>GetMaxKey()</code> - Returns one of the keys with maximal value. If no element exists, return an empty string “”.</li>
<li><code>GetMinKey()</code> - Returns one of the keys with minimal value. If no element exists, return an empty string “”.</li>
</ul>
<p>Challenge: Perform all these in O(1) time complexity.</p>
<h1 id="2-想法"><a href="#2-想法" class="headerlink" title="2. 想法"></a>2. 想法</h1><p>我们知道 hashmap 插入，删除，更改是 O(1) 的，为了得到最值也是 O(1)，关键是实现一个双向链表，同时利用到增减都为单位量。下面详细解释各部分</p>
<h2 id="2-1-node"><a href="#2-1-node" class="headerlink" title="2.1. node"></a>2.1. <code>node</code></h2><p>双向链表的结点，每个结点记录一个 val, 以及值为 val 的键的字典，val&gt;0</p>
<ul>
<li>pre: 双向链表，指向前一结点</li>
<li>next：双向链表，指向后一结点</li>
<li>val: 关键字对应的值，可以看作频率，通过这个将不同值的关键值分组，类似分块查找，</li>
<li>keys: 一个 dict, 用来容纳 val 相同的键值，查找插入删除都为 O(1)</li>
</ul>
<h2 id="2-2-双向链表"><a href="#2-2-双向链表" class="headerlink" title="2.2. 双向链表"></a>2.2. <code>双向链表</code></h2><p>有头指针，尾指针。有一个 val=0 的结点，初始化时头尾指针指向此头结点。<br>还有一个 dict，键为 val, 值为对应 val 的结点，以便在 O(1) 内找到结点。</p>
<p>如果结点中不含任何关键字，则去掉此结点。如果还存在 key, 头指针指向 val 最小的除 0 的结点（必有关键字）, 尾指针则指向最大的结点，这样 getMin,getMax 都为 O(1)。如果没有任何 key, 则只有一个不含关键字的头节点 node(0)，初始化时也是这样，则头尾指针都指向它</p>
<p>在增减时，需更新头尾指针（最值），可以发现，只有在增加结点或删除结点时才需更新</p>
<ul>
<li><p><code>incTo(self,key,val)</code>:</p>
<ol>
<li>判断 val 结点是否存在，若不，则创建此结点</li>
<li>使 node(val) 包含关键字 key</li>
<li>如果前一结点（可以保证一定存在）含此关键字，则删除此关键字</li>
<li>由上一步，如果删除了前一结点的关键字后，前一结点不再含任何关键字，则删除此结点</li>
</ol>
</li>
<li><p><code>dccTo(self,key,val)</code>:</p>
<ol>
<li>判断 val 结点是否存在，若不，则创建此结点</li>
<li>使 node(val) 包含关键字 key</li>
<li>后一结点（可以保证一定存在）一定含此关键字，删除此关键字</li>
<li>由上一步，如果删除了后一结点的关键字后，后一结点不再含任何关键字，则删除此结点</li>
</ol>
</li>
<li><p><code>addNode(self,val)</code>:</p>
</li>
</ul>
<p>注意 inc,dec 时代码不一样，但思路是一样的</p>
<pre><code>1. 将结点注册到双向链表的 access_mp，既给此 dict, 增加键值对`val:node(val)`
2. 修改链连接
3. 更新头尾指针指向的结点（由于 inc,dec 改变的是单位量，所以可以直接找到前一结点或后一节点，这是 O(1) 的
</code></pre><ul>
<li><p><code>delNode(self,val)</code>:</p>
<ol>
<li>修改链连接</li>
<li>更新头尾指针指向的结点（由于 inc,dec 改变的是单位量，所以可以直接找到此次 dec 后的最大值或最小值，即若上次最小值是 val 的话，则新的最小值为 node(val).next，即下一节点（循环链表，如果为空时会自动指向头节点 node(0), 代码很简洁，同理可得上次最大值为 val 更新尾指针）</li>
<li>在 access_mp 中删除此结点</li>
</ol>
</li>
</ul>
<h2 id="2-3-AllOne"><a href="#2-3-AllOne" class="headerlink" title="2.3. AllOne:"></a>2.3. <code>AllOne</code>:</h2><p>这个结构包含一个上述的双向链表和一个 (key:val) 键值对字典，通过此字典来增减关键字的 val，同时在双向链表中找到对应结点，再找到对应的 key</p>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3. 总结"></a>3. 总结</h1><p>这有点像 chain_map 了，不过 python 中的 chain_map 只是简单的连接起来，方便操作多个 map(dict), 而这个数据结构通过双向链表将相同的 val 的 key 字典连接。由于增减的是单位量，所以更新时，更新最值可以通过链表在 O(1) 时间找到。<br>所以此结构可以用在更新关键字频繁且最好是单位量的地方，而且数据量很大时，查找最值也更有效。（不然创建删除结点费时间）</p>
<h1 id="4-测试"><a href="#4-测试" class="headerlink" title="4. 测试"></a>4. 测试</h1><p>做了测试，与 hashmap 比较了一下（这里设定 hashmap 当值&lt;=0 则删除该键，然后找最大值，最小值用 O(n) 时间）<br>测试是随机产生一些字符串，然后随机产生操作，inc,dec,getMin,getMax, 以及对应的数据（参数），默认产生 1000 个操作，然后重复 1000 次，取总时间</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>allOne</th>
<th>hashMap</th>
<th>ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td>增减区间：[1,10]<br>增减与取最值操作的比例：1：1</td>
<td>2.83s</td>
<td>1.67s</td>
<td>1.69</td>
</tr>
<tr>
<td>增减区间：[1,5]<br>增减与取最值操作的比例：1：1</td>
<td>4.06s</td>
<td>1.65s</td>
<td>2.44</td>
</tr>
<tr>
<td>增减区间：[1,5]<br>增减与取最值操作的比例：1：5</td>
<td>1.59s</td>
<td>2.21s</td>
<td>0.72</td>
</tr>
</tbody>
</table>
</div>
<h2 id="4-1-测试代码"><a href="#4-1-测试代码" class="headerlink" title="4.1. 测试代码"></a>4.1. 测试代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> allOoneDS <span class="keyword">import</span> AllOne</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span>  random <span class="keyword">import</span> choice,sample,randint</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">hashMap</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.op = &#123;<span class="string">"inc"</span>:self.inc,<span class="string">"dec"</span>:self.dec,<span class="string">"getMaxKey"</span>:self.getMaxKey,<span class="string">"getMinKey"</span>:self.getMinKey&#125;</span><br><span class="line">        self.mp=&#123;<span class="string">''</span>:<span class="number">0</span>&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inc</span><span class="params">(self,key,n=<span class="number">1</span>)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.mp:self.mp[key]+=n</span><br><span class="line">        <span class="keyword">else</span>:self.mp[key]=n</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dec</span><span class="params">(self,key,n=<span class="number">1</span>)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> self.mp:<span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> self.mp[key]&lt;=n:<span class="keyword">del</span> self.mp[key]</span><br><span class="line">        <span class="keyword">else</span>: self.mp[key]-=n</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMinKey</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> min(list(self.mp.keys()),key=<span class="keyword">lambda</span> key:self.mp[key])</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMaxKey</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> max(list(self.mp.keys()),key=<span class="keyword">lambda</span> key:self.mp[key])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">op_origin = [<span class="string">'inc'</span>,<span class="string">'dec'</span>,<span class="string">'getMinKey'</span>,<span class="string">'getMaxKey'</span>,<span class="string">'getMinKey'</span>,<span class="string">'getMaxKey'</span>,<span class="string">'getMinKey'</span>,<span class="string">'getMaxKey'</span>,<span class="string">'getMinKey'</span>,<span class="string">'getMaxKey'</span>,<span class="string">'getMinKey'</span>,<span class="string">'getMaxKey'</span>]</span><br><span class="line">ch=list(<span class="string">'qwertyuiopasdfghjklzxcvbnm'</span>)</span><br><span class="line">keys =[ <span class="string">''</span>.join(sample(ch,i)) <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">10</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">20</span>,<span class="number">5</span>)]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">testCase</span><span class="params">(n=<span class="number">1000</span>)</span>:</span></span><br><span class="line">    ops=[]</span><br><span class="line">    data=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        p = randint(<span class="number">0</span>,len(op_origin)<span class="number">-1</span>)</span><br><span class="line">        ops.append(op_origin[p])</span><br><span class="line">        <span class="keyword">if</span> p&lt;<span class="number">2</span>:</span><br><span class="line">            data.append([randint(<span class="number">1</span>,<span class="number">10</span>)])</span><br><span class="line">        <span class="keyword">else</span>:data.append([])</span><br><span class="line">    <span class="keyword">return</span> ops,data</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(repeat=<span class="number">1000</span>)</span>:</span></span><br><span class="line">    t1,t2=<span class="number">0</span>,<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(repeat):</span><br><span class="line">        allOne = AllOne()</span><br><span class="line">        hsmp = hashMap()</span><br><span class="line">        ops,data = testCase()</span><br><span class="line">        t1-=time()</span><br><span class="line">        <span class="keyword">for</span> op,datum <span class="keyword">in</span> zip(ops,data):</span><br><span class="line">            allOne.op[op](*datum)</span><br><span class="line">        t1+=time()</span><br><span class="line"></span><br><span class="line">        t2-=time()</span><br><span class="line">        <span class="keyword">for</span> op,datum <span class="keyword">in</span> zip(ops,data):</span><br><span class="line">            hsmp.op[op](*datum)</span><br><span class="line">        t2+=time()</span><br><span class="line">    <span class="keyword">return</span> t1,t2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    t1,t2= test()</span><br><span class="line">    print(t1,t2)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-allOne-代码"><a href="#5-allOne-代码" class="headerlink" title="5. allOne 代码"></a>5. allOne 代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val=None,data_mp=None,pre=None,next=None)</span>:</span></span><br><span class="line">        self.val=val</span><br><span class="line">        self.data_mp = &#123;&#125; <span class="keyword">if</span> data_mp <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">else</span> data_mp</span><br><span class="line">        self.pre=pre</span><br><span class="line">        self.next=next</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span><span class="params">(self,nd)</span>:</span></span><br><span class="line">        <span class="keyword">return</span>  self.val&lt;nd.val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getOne</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self.data_mp:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">        <span class="keyword">else</span>:<span class="keyword">return</span> list(self.data_mp.items())[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self,key)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.data_mp[key]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.data_mp)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self,key)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.data_mp[key]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self,key,val)</span>:</span></span><br><span class="line">        self.data_mp[key]= val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.data_mp==&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'node(&#123;&#125;,&#123;&#125;)'</span>.format(self.val,self.data_mp)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">doubleLinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.head=  self.tail = node(<span class="number">0</span>)</span><br><span class="line">        self.head.next = self.head</span><br><span class="line">        self.head.pre = self.head</span><br><span class="line">        self.chain_mp=&#123;<span class="number">0</span>:self.head&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        li = list(self.chain_mp.values())</span><br><span class="line">        li = [str(i) <span class="keyword">for</span> i <span class="keyword">in</span> li]</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">'min:&#123;&#125;, max:&#123;&#125;\n'</span>.format(self.head.val,self.tail.val)   \</span><br><span class="line">               + <span class="string">'\n'</span>.join(li)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMax</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.tail.getOne()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMin</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.head.getOne()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addIncNode</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        <span class="comment"># when adding a node,inc 1, so it's guranted that node(val-1)  exists</span></span><br><span class="line">        self.chain_mp[val].pre= self.chain_mp[val<span class="number">-1</span>]</span><br><span class="line">        self.chain_mp[val].next= self.chain_mp[val<span class="number">-1</span>].next</span><br><span class="line">        self.chain_mp[val<span class="number">-1</span>].next.pre = self.chain_mp[val<span class="number">-1</span>].next = self.chain_mp[val]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addDecNode</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        <span class="comment"># when adding a node,dec 1, so it's guranted that node(val+1)  exists</span></span><br><span class="line">        self.chain_mp[val].next= self.chain_mp[val+<span class="number">1</span>]</span><br><span class="line">        self.chain_mp[val].pre= self.chain_mp[val+<span class="number">1</span>].pre</span><br><span class="line">        self.chain_mp[val+<span class="number">1</span>].pre.next = self.chain_mp[val+<span class="number">1</span>].pre = self.chain_mp[val]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addNode</span><span class="params">(self,val,dec=False)</span>:</span></span><br><span class="line">        self.chain_mp[val] = node(val)</span><br><span class="line">        <span class="keyword">if</span> dec:self.addDecNode(val)</span><br><span class="line">        <span class="keyword">else</span>:self.addIncNode(val)</span><br><span class="line">        <span class="keyword">if</span> self.tail.val&lt;val:self.tail = self.chain_mp[val]</span><br><span class="line">        <span class="keyword">if</span> self.head.val&gt;val <span class="keyword">or</span> self.head.val==<span class="number">0</span>:self.head= self.chain_mp[val]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delNode</span><span class="params">(self,val)</span>:</span></span><br><span class="line">        self.chain_mp[val].next.pre = self.chain_mp[val].pre</span><br><span class="line">        self.chain_mp[val].pre.next = self.chain_mp[val].next</span><br><span class="line">        <span class="keyword">if</span> self.tail.val==val:self.tail = self.chain_mp[val].pre</span><br><span class="line">        <span class="keyword">if</span> self.head.val==val:self.head = self.chain_mp[val].next</span><br><span class="line">        <span class="keyword">del</span> self.chain_mp[val]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">incTo</span><span class="params">(self,key,val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">not</span> <span class="keyword">in</span> self.chain_mp:</span><br><span class="line">            self.addNode(val)</span><br><span class="line">        self.chain_mp[val][key] = val</span><br><span class="line">        <span class="keyword">if</span> val!=<span class="number">1</span> :  <span class="comment"># key in the pre node</span></span><br><span class="line">            <span class="keyword">del</span> self.chain_mp[val<span class="number">-1</span>][key]</span><br><span class="line">            <span class="comment">#print(self.chain_mp[val-1])</span></span><br><span class="line">            <span class="keyword">if</span> self.chain_mp[val<span class="number">-1</span>].isEmpty():</span><br><span class="line">                <span class="comment">#print('*'*20)</span></span><br><span class="line">                self.delNode(val<span class="number">-1</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decTo</span><span class="params">(self,key,val)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> val <span class="keyword">not</span> <span class="keyword">in</span> self.chain_mp:</span><br><span class="line">            self.addNode(val,dec=<span class="keyword">True</span>)</span><br><span class="line">        <span class="comment"># notice that the headnode(0) shouldn't add key</span></span><br><span class="line">        <span class="keyword">if</span> val!=<span class="number">0</span>: self.chain_mp[val][key] = val</span><br><span class="line">        <span class="keyword">del</span> self.chain_mp[val+<span class="number">1</span>][key]</span><br><span class="line">        <span class="keyword">if</span> self.chain_mp[val+<span class="number">1</span>].isEmpty():</span><br><span class="line">            self.delNode(val+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AllOne</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Initialize your data structure here.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.op = &#123;<span class="string">"inc"</span>:self.inc,<span class="string">"dec"</span>:self.dec,<span class="string">"getMaxKey"</span>:self.getMaxKey,<span class="string">"getMinKey"</span>:self.getMinKey&#125;</span><br><span class="line">        self.mp = &#123;&#125;</span><br><span class="line">        self.dll = doubleLinkedList()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> str(self.dll)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self,key)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.mp[key]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self,key)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.mp[key]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self,key,val)</span>:</span></span><br><span class="line">        self.mp[key]= val</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.mp)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inc</span><span class="params">(self, key,n=<span class="number">1</span>)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Inserts a new key &lt;Key&gt; with value 1. Or increments an existing key by 1.</span></span><br><span class="line"><span class="string">        :type key: str</span></span><br><span class="line"><span class="string">        :rtype: void</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self:</span><br><span class="line">            self[key]+=n</span><br><span class="line">        <span class="keyword">else</span>:self[key]=n</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n): self.dll.incTo(key, self[key])</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dec</span><span class="params">(self, key,n=<span class="number">1</span>)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Decrements an existing key by 1. If Key's value is 1, remove it from the data structure.</span></span><br><span class="line"><span class="string">        :type key: str</span></span><br><span class="line"><span class="string">        :rtype: void</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.mp:</span><br><span class="line">            mn = min( self[key],n)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(mn): self.dll.decTo(key, self[key]-i<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">if</span> self[key] == n:</span><br><span class="line">                <span class="keyword">del</span> self[key]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self[key] = self[key]-n</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMaxKey</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns one of the keys with maximal value.</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.dll.getMax()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getMinKey</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Returns one of the keys with Minimal value.</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> self.dll.getMin()</span><br></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/all-one-data-structure.html">『数据结构』inc,dec,getMin,getMax 均为 O(1)</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">mbinary</a></p>
        <p><span>发布时间:</span>2018-01-24, 00:00:00</p>
        <p><span>最后更新:</span>2019-01-30, 17:41:32</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/all-one-data-structure.html" title="『数据结构』inc,dec,getMin,getMax 均为 O(1)">https://mbinary.xyz/all-one-data-structure.html</a>
            <span class="copy-path" data-clipboard-text="原文: https://mbinary.xyz/all-one-data-structure.html　　作者: mbinary" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/decrypt-netease-music.html">
                    『WEB』从网易云音乐缓存文件得到MP3
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/video.html">
                    影视作品观后感
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-All-O-one-Data-Structure-—leetcode-432"><span class="toc-number">1.</span> <span class="toc-text">1. All O`one Data Structure —leetcode 432</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-想法"><span class="toc-number">2.</span> <span class="toc-text">2. 想法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-node"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. node</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-双向链表"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 双向链表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-AllOne"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. AllOne:</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-总结"><span class="toc-number">3.</span> <span class="toc-text">3. 总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-测试"><span class="toc-number">4.</span> <span class="toc-text">4. 测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-测试代码"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. 测试代码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-allOne-代码"><span class="toc-number">5.</span> <span class="toc-text">5. allOne 代码</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-6 i,
        .toc-level-6 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"『数据结构』inc,dec,getMin,getMax 均为 O(1)　| mbinary's blog　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
        <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>

<!--<script src="//cdn.jsdelivr.net/npm/leancloud-storage@latest/dist/av-min.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js'></script>-->

<div id="vcomments"></div>
<script>
    var notify = false == true ? true : false;
    var verify = false == true ? true : false;
    var visitor = true == true ? true : false;
new Valine({
    el: '#vcomments',
    notify: notify,
    verify: verify,
    appId: 'ArpEYbLUBmpXK3f245hKNu4A-gzGzoHsz',
    appKey: 'X5cHcMU1ATb8q0prtPGEqIPX',
    lang: 'en',
    placeholder: '留下你的小脚印^_^ (支持 markdown, 上面三项 昵称,邮件(可用于回复),网址都是可选填的)',
    avatar: 'monsterid',
    pageSize: 10,
    visitor: visitor
    });
</script>

    




    <div class="scroll" id="post-nav-button">
        
            <a href="/decrypt-netease-music.html" title="上一篇: 『WEB』从网易云音乐缓存文件得到MP3">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/video.html" title="下一篇: 影视作品观后感">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/number-theory.html">Number-Theory</a></li><li class="post-list-item"><a class="post-list-link" href="/string-matching.html">String-Mathching-Algorithm</a></li><li class="post-list-item"><a class="post-list-link" href="/graph.html">图算法</a></li><li class="post-list-item"><a class="post-list-link" href="/fib-heap.html">『数据结构』Fibonacci-heap</a></li><li class="post-list-item"><a class="post-list-link" href="/b-tree.html">『数据结构』B树(B-Tree)及其变体 B+树,B*树</a></li><li class="post-list-item"><a class="post-list-link" href="/introduction-to-bitcoin.html">『比特币』概述</a></li><li class="post-list-item"><a class="post-list-link" href="/introduction-to-blockchain.html">『区块链』简介</a></li><li class="post-list-item"><a class="post-list-link" href="/algorithm-general.html">『算法』概述</a></li><li class="post-list-item"><a class="post-list-link" href="/red-black-tree.html">『数据结构』红黑树(red-black tree)</a></li><li class="post-list-item"><a class="post-list-link" href="/tree.html">『数据结构』树</a></li><li class="post-list-item"><a class="post-list-link" href="/hashTable.html">『数据结构』散列表</a></li><li class="post-list-item"><a class="post-list-link" href="/sort.html">『算法』排序</a></li><li class="post-list-item"><a class="post-list-link" href="/bus.html">『计算机组成原理』总线</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-device.html">『现代操作系统』IO设备</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-software.html">『现代操作系统』IO软件原理</a></li><li class="post-list-item"><a class="post-list-link" href="/IO-hardware.html">『现代操作系统』IO硬件原理</a></li><li class="post-list-item"><a class="post-list-link" href="/os-general.html">『现代操作系统』操作系统引论</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-file-io.html">『Unix环境高级编程』linux 文件 I/O</a></li><li class="post-list-item"><a class="post-list-link" href="/multiprocessor.html">『现代操作系统』多处理机</a></li><li class="post-list-item"><a class="post-list-link" href="/simple-shell.html">『linux』c 语言实现一个简易的 shell</a></li><li class="post-list-item"><a class="post-list-link" href="/deadlock.html">『现代操作系统』死锁</a></li><li class="post-list-item"><a class="post-list-link" href="/risk-predict.html">信用卡持卡人风险预测</a></li><li class="post-list-item"><a class="post-list-link" href="/comics-about-staying-up.html">『小仓鼠漫画』熬夜的危害与防护</a></li><li class="post-list-item"><a class="post-list-link" href="/ctf-basic.html">『CTF』网络信息安全攻防实验室之基础关 writeup</a></li><li class="post-list-item"><a class="post-list-link" href="/send-blog-automatically.html">『WEB』用 python 发送 csdn 博客</a></li><li class="post-list-item"><a class="post-list-link" href="/the-roommate-that-uses-mechanical-keyboard.html">用机械键盘的室友</a></li><li class="post-list-item"><a class="post-list-link" href="/csapp-bomb-lab-report.html">CSAPP-BOMB-LAB</a></li><li class="post-list-item"><a class="post-list-link" href="/learning-and-forgetting.html">学习与遗忘</a></li><li class="post-list-item"><a class="post-list-link" href="/20-years-old-summary.html">2017 年，20 岁，大二寒假总结与感悟</a></li><li class="post-list-item"><a class="post-list-link" href="/decrypt-netease-music.html">『WEB』从网易云音乐缓存文件得到MP3</a></li><li class="post-list-item"><a class="post-list-link" href="/all-one-data-structure.html">『数据结构』inc,dec,getMin,getMax 均为 O(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/video.html">影视作品观后感</a></li><li class="post-list-item"><a class="post-list-link" href="/books.html">书籍总结与推荐</a></li><li class="post-list-item"><a class="post-list-link" href="/common-lisp-macro.html">『common lisp』宏及函数的实现</a></li><li class="post-list-item"><a class="post-list-link" href="/hacker-and-painter.html">『读书笔记』黑客与画家</a></li><li class="post-list-item"><a class="post-list-link" href="/from-chem-to-cs.html">从化院到计院</a></li><li class="post-list-item"><a class="post-list-link" href="/from-zhuzhong-to-ustc.html">从竹中到科大</a></li></ul>




    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2019 mbinary
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
    </div>
</footer>

    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
            
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
<!-->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<--!>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>
